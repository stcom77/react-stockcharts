{"version":3,"sources":["../../../../src/lib/interactive/InteractiveYCoordinate.js"],"names":["React","Component","PropTypes","format","isDefined","noop","strokeDashTypes","getValueFromOverride","terminate","saveNodeType","isHoverForInteractiveType","EachInteractiveYCoordinate","HoverTextNearMouse","InteractiveYCoordinate","props","handleDrag","bind","handleDragComplete","getSelectionState","nodes","state","index","yValue","setState","override","moreProps","yCoordinateList","newAlertList","map","each","idx","selected","draggedAlert","onDragComplete","xyValue","current","start","end","onDelete","propTypes","onChoosePosition","func","isRequired","onSelect","defaultPriceCoordinate","shape","bgFill","string","bgOpacity","number","stroke","strokeDasharray","oneOf","strokeOpacity","strokeWidth","textFill","fontFamily","fontWeight","fontStyle","fontSize","text","textBox","height","left","width","padding","right","closeIcon","edge","fill","fillOpacity","hoverText","object","array","enabled","bool","defaultProps","orient","at","arrowWidth","dx","rectWidth","rectHeight","displayFormat","enable","bgHeight","bgWidth","contextTypes","subscribe","unsubscribe","generateSubscriptionId","chartId","oneOfType"],"mappings":"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","file":"InteractiveYCoordinate.js","sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { format } from \"d3-format\";\nimport { isDefined, noop, strokeDashTypes } from \"../utils\";\n\nimport {\n\tgetValueFromOverride,\n\tterminate,\n\tsaveNodeType,\n\tisHoverForInteractiveType,\n} from \"./utils\";\nimport EachInteractiveYCoordinate from \"./wrapper/EachInteractiveYCoordinate\";\nimport HoverTextNearMouse from \"./components/HoverTextNearMouse\";\n\nclass InteractiveYCoordinate extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.handleDrag = this.handleDrag.bind(this);\n\t\tthis.handleDragComplete = this.handleDragComplete.bind(this);\n\t\tthis.terminate = terminate.bind(this);\n\n\t\tthis.saveNodeType = saveNodeType.bind(this);\n\t\tthis.getSelectionState = isHoverForInteractiveType(\"yCoordinateList\")\n\t\t\t.bind(this);\n\n\t\tthis.nodes = [];\n\t\tthis.state = {};\n\t}\n\thandleDrag(index, yValue) {\n\t\tthis.setState({\n\t\t\toverride: {\n\t\t\t\tindex,\n\t\t\t\tyValue,\n\t\t\t}\n\t\t});\n\t}\n\thandleDragComplete(moreProps) {\n\t\tconst { override } = this.state;\n\t\tif (isDefined(override)) {\n\t\t\tconst { yCoordinateList } = this.props;\n\t\t\tconst newAlertList = yCoordinateList\n\t\t\t\t.map((each, idx) => {\n\t\t\t\t\tconst selected = (idx === override.index);\n\t\t\t\t\treturn selected\n\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t...each,\n\t\t\t\t\t\t\tyValue: override.yValue,\n\t\t\t\t\t\t\tselected,\n\t\t\t\t\t\t}\n\t\t\t\t\t\t: {\n\t\t\t\t\t\t\t...each,\n\t\t\t\t\t\t\tselected\n\t\t\t\t\t\t};\n\t\t\t\t});\n\t\t\tconst draggedAlert = newAlertList[override.index];\n\t\t\tthis.setState({\n\t\t\t\toverride: null,\n\t\t\t}, () => {\n\t\t\t\tthis.props.onDragComplete(newAlertList, moreProps, draggedAlert);\n\t\t\t});\n\t\t}\n\t}\n\thandleDrawLine(xyValue) {\n\t\tconst { current } = this.state;\n\n\t\tif (isDefined(current) && isDefined(current.start)) {\n\t\t\tthis.setState({\n\t\t\t\tcurrent: {\n\t\t\t\t\tstart: current.start,\n\t\t\t\t\tend: xyValue,\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\trender() {\n\t\tconst { yCoordinateList, onDelete } = this.props;\n\t\tconst { override } = this.state;\n\t\treturn (\n\t\t\t<g>\n\t\t\t\t{yCoordinateList.map((each, idx) => {\n\t\t\t\t\tconst props = each;\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<EachInteractiveYCoordinate key={idx}\n\t\t\t\t\t\t\tref={this.saveNodeType(idx)}\n\t\t\t\t\t\t\tindex={idx}\n\t\t\t\t\t\t\t{...props}\n\t\t\t\t\t\t\tselected={each.selected}\n\t\t\t\t\t\t\tyValue={getValueFromOverride(override, idx, \"yValue\", each.yValue)}\n\n\t\t\t\t\t\t\tonDelete={onDelete}\n\t\t\t\t\t\t\tonDrag={this.handleDrag}\n\t\t\t\t\t\t\tonDragComplete={this.handleDragComplete}\n\t\t\t\t\t\t\tedgeInteractiveCursor=\"react-stockcharts-move-cursor\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</g>\n\t\t);\n\t}\n}\n\nInteractiveYCoordinate.propTypes = {\n\tonChoosePosition: PropTypes.func.isRequired,\n\tonDragComplete: PropTypes.func.isRequired,\n\tonSelect: PropTypes.func,\n\tonDelete: PropTypes.func,\n\n\tdefaultPriceCoordinate: PropTypes.shape({\n\t\tbgFill: PropTypes.string.isRequired,\n\t\tbgOpacity: PropTypes.number.isRequired,\n\n\t\tstroke: PropTypes.string.isRequired,\n\t\tstrokeDasharray: PropTypes.oneOf(strokeDashTypes).isRequired,\n\t\tstrokeOpacity: PropTypes.number.isRequired,\n\t\tstrokeWidth: PropTypes.number.isRequired,\n\n\t\ttextFill: PropTypes.string.isRequired,\n\t\tfontFamily: PropTypes.string.isRequired,\n\t\tfontWeight: PropTypes.string.isRequired,\n\t\tfontStyle: PropTypes.string.isRequired,\n\t\tfontSize: PropTypes.number.isRequired,\n\t\ttext: PropTypes.string.isRequired,\n\n\t\ttextBox: PropTypes.shape({\n\t\t\theight: PropTypes.number.isRequired,\n\t\t\tleft: PropTypes.number.isRequired,\n      width: PropTypes.number.isRequired,\n\t\t\tpadding: PropTypes.shape({\n\t\t\t\tleft: PropTypes.number.isRequired,\n\t\t\t\tright: PropTypes.number.isRequired,\n\t\t\t}),\n\t\t\tcloseIcon: PropTypes.shape({\n\t\t\t\tpadding: PropTypes.shape({\n\t\t\t\t\tleft: PropTypes.number.isRequired,\n\t\t\t\t\tright: PropTypes.number.isRequired,\n\t\t\t\t}),\n\t\t\t\twidth: PropTypes.number.isRequired,\n\t\t\t})\n\t\t}).isRequired,\n\t\tedge: PropTypes.shape({\n\t\t\tstroke: PropTypes.string.isRequired,\n\t\t\tstrokeOpacity: PropTypes.number.isRequired,\n\t\t\tstrokeWidth: PropTypes.number.isRequired,\n\n\t\t\tfill: PropTypes.string.isRequired,\n\t\t\tfillOpacity: PropTypes.number.isRequired,\n\t\t})\n\t}).isRequired,\n\n\thoverText: PropTypes.object.isRequired,\n\tyCoordinateList: PropTypes.array.isRequired,\n\tenabled: PropTypes.bool.isRequired,\n};\n\nInteractiveYCoordinate.defaultProps = {\n\tonChoosePosition: noop,\n\tonDragComplete: noop,\n\tonSelect: noop,\n\tonDelete: noop,\n\n\tdefaultPriceCoordinate: {\n\t\tbgFill: \"#FFFFFF\",\n\t\tbgOpacity: 1,\n\n\t\tstroke: \"#6574CD\",\n\t\tstrokeOpacity: 1,\n\t\tstrokeDasharray: \"ShortDash2\",\n\t\tstrokeWidth: 1,\n\n\t\ttextFill: \"#6574CD\",\n\t\tfontFamily: \"Helvetica Neue, Helvetica, Arial, sans-serif\",\n\t\tfontSize: 12,\n\t\tfontStyle: \"normal\",\n\t\tfontWeight: \"normal\",\n\t\ttext: \"Alert\",\n\t\ttextBox: {\n\t\t\theight: 24,\n\t\t\tleft: 20,\n      width: 50,\n\t\t\tpadding: { left: 10, right: 5 },\n\t\t\tcloseIcon: {\n\t\t\t\tpadding: { left: 5, right: 8 },\n\t\t\t\twidth: 8,\n\t\t\t}\n\t\t},\n\t\tedge: {\n\t\t\tstroke: \"#6574CD\",\n\t\t\tstrokeOpacity: 1,\n\t\t\tstrokeWidth: 1,\n\n\t\t\tfill: \"#FFFFFF\",\n\t\t\tfillOpacity: 1,\n\t\t\torient: \"right\",\n\t\t\tat: \"right\",\n\t\t\tarrowWidth: 10,\n\t\t\tdx: 0,\n\t\t\trectWidth: 50,\n\t\t\trectHeight: 20,\n\t\t\tdisplayFormat: format(\".2f\"),\n\t\t}\n\t},\n\thoverText: {\n\t\t...HoverTextNearMouse.defaultProps,\n\t\tenable: true,\n\t\tbgHeight: 18,\n\t\tbgWidth: 175,\n\t\ttext: \"Click and drag the edge circles\",\n\t},\n\tyCoordinateList: [],\n};\n\nInteractiveYCoordinate.contextTypes = {\n\tsubscribe: PropTypes.func.isRequired,\n\tunsubscribe: PropTypes.func.isRequired,\n\tgenerateSubscriptionId: PropTypes.func.isRequired,\n\tchartId: PropTypes.oneOfType([PropTypes.number, PropTypes.string]).isRequired,\n};\n\nexport default InteractiveYCoordinate;\n"]}