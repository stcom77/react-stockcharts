{"version":3,"sources":["../../../../src/lib/coordinates/EdgeIndicator.js"],"names":["React","Component","PropTypes","format","drawOnCanvas","renderSVG","GenericChartComponent","getAxisCanvas","first","last","isDefined","functor","noop","strokeDashTypes","EdgeIndicator","props","bind","ctx","moreProps","edge","helper","propTypes","yAccessor","func","type","oneOf","className","string","fill","oneOfType","lineStroke","textFill","itemType","isRequired","orient","edgeAt","displayFormat","rectHeight","number","rectWidth","tickerWidth","tickerHeight","arrowWidth","lineStrokeDasharray","defaultProps","yAxisPad","fontFamily","fontSize","dx","hideLine","opacity","stroke","strokeOpacity","strokeWidth","lineOpacity","plotData","item","getEdge","edgeType","xScale","yScale","chartConfig","xAccessor","width","yValue","xValue","x1","Math","round","y1","left","right","edgeX","coordinate","show","x2","y2"],"mappings":";;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,MAAT,QAAuB,WAAvB;;AAEA,SAASC,6BAAT,EAAuBC,uBAAvB,QAAwC,oBAAxC;AACA,OAAOC,qBAAP,MAAkC,0BAAlC;AACA,SAASC,aAAT,QAA8B,qBAA9B;;AAEA,SAASC,KAAT,EAAgBC,IAAhB,EAAsBC,SAAtB,EAAiCC,OAAjC,EAA0CC,IAA1C,EAAgDC,eAAhD,QAAuE,UAAvE;;IAEMC,a;;;AACL,wBAAYC,KAAZ,EAAmB;AAAA;;AAAA,4HACZA,KADY;;AAElB,QAAKV,SAAL,GAAiB,MAAKA,SAAL,CAAeW,IAAf,OAAjB;AACA,QAAKZ,YAAL,GAAoB,MAAKA,YAAL,CAAkBY,IAAlB,OAApB;AAHkB;AAIlB;;;;+BAEYC,G,EAAKC,S,EAAW;AAC5B,OAAMC,OAAOC,OAAO,KAAKL,KAAZ,EAAmBG,SAAnB,CAAb;AACA,OAAMH,qBACF,KAAKA,KADH,EAEFI,IAFE,CAAN;AAIAf,iBAAaa,GAAb,EAAkBF,KAAlB;AACA;;;4BAESG,S,EAAW;AACpB,OAAMC,OAAOC,OAAO,KAAKL,KAAZ,EAAmBG,SAAnB,CAAb;AACA,OAAMH,qBACF,KAAKA,KADH,EAEFI,IAFE,CAAN;AAIA,UAAOd,WAAUU,KAAV,CAAP;AACA;;;2BAEQ;AACR,UAAO,oBAAC,qBAAD;AACN,kBADM;AAEN,UAAM,KAFA;AAGN,aAAS,KAAKV,SAHR;AAIN,gBAAY,KAAKD,YAJX;AAKN,kBAAcG,aALR;AAMN,YAAQ,CAAC,KAAD;AANF,KAAP;AAQA;;;;EAlC0BN,S;;AAqC5Ba,cAAcO,SAAd,GAA0B;AACzBC,YAAWpB,UAAUqB,IADI;;AAGzBC,OAAMtB,UAAUuB,KAAV,CAAgB,CAAC,YAAD,CAAhB,CAHmB;AAIzBC,YAAWxB,UAAUyB,MAJI;AAKzBC,OAAM1B,UAAU2B,SAAV,CAAoB,CACzB3B,UAAUyB,MADe,EAEzBzB,UAAUqB,IAFe,CAApB,CALmB;AASzBO,aAAY5B,UAAU2B,SAAV,CAAoB,CAC/B3B,UAAUyB,MADqB,EAE/BzB,UAAUqB,IAFqB,CAApB,CATa;AAazBQ,WAAU7B,UAAU2B,SAAV,CAAoB,CAC7B3B,UAAUyB,MADmB,EAE7BzB,UAAUqB,IAFmB,CAApB,CAbe;AAiBzBS,WAAU9B,UAAUuB,KAAV,CAAgB,CAAC,OAAD,EAAU,MAAV,CAAhB,EAAmCQ,UAjBpB;AAkBzBC,SAAQhC,UAAUuB,KAAV,CAAgB,CAAC,MAAD,EAAS,OAAT,CAAhB,CAlBiB;AAmBzBU,SAAQjC,UAAUuB,KAAV,CAAgB,CAAC,MAAD,EAAS,OAAT,CAAhB,CAnBiB;AAoBzBW,gBAAelC,UAAUqB,IApBA;AAqBzBc,aAAYnC,UAAUoC,MArBG;AAsBzBC,YAAWrC,UAAUoC,MAtBI;AAuBzBE,cAAatC,UAAUoC,MAvBE;AAwBzBG,eAAcvC,UAAUoC,MAxBC;AAyBzBI,aAAYxC,UAAUoC,MAzBG;AA0BzBK,sBAAqBzC,UAAUuB,KAAV,CAAgBZ,eAAhB;AA1BI,CAA1B;;AA6BAC,cAAc8B,YAAd,GAA6B;AAC5BlB,YAAW,iCADiB;;AAG5BF,OAAM,YAHsB;AAI5BU,SAAQ,MAJoB;AAK5BC,SAAQ,MALoB;AAM5BJ,WAAU,SANkB;AAO5BK,gBAAejC,OAAO,KAAP,CAPa;AAQ5B0C,WAAU,CARkB;AAS5BR,aAAY,EATgB;AAU5BI,eAAc,EAVc;AAW5BF,YAAW,EAXiB;AAY5BC,cAAa,EAZe;AAa5BE,aAAY,EAbgB;AAc5BI,aAAY,8CAdgB;AAe5BC,WAAU,EAfkB;AAgB5BC,KAAI,CAhBwB;AAiB5BC,WAAU,KAjBkB;AAkB5BrB,OAAM,SAlBsB;AAmB5BsB,UAAS,CAnBmB;;AAqB5BC,SAAQvC,IArBoB;AAsB5BwC,gBAAe,CAtBa;AAuB5BC,cAAa,CAvBe;AAwB5BvB,aAAY,SAxBgB;AAyB5BwB,cAAa,GAzBe;AA0B5BX,sBAAqB;AA1BO,CAA7B;;AA6BA,SAASvB,MAAT,CAAgBL,KAAhB,EAAuBG,SAAvB,EAAkC;AAAA,KACzBc,QADyB,GACDjB,KADC,CACzBiB,QADyB;AAAA,KACfV,SADe,GACDP,KADC,CACfO,SADe;AAAA,KAEzBiC,QAFyB,GAEZrC,SAFY,CAEzBqC,QAFyB;;;AAIjC,KAAMC,OAAOxB,aAAa,OAAb,GACVxB,MAAM+C,QAAN,EAAgBjC,SAAhB,CADU,GAEVb,KAAK8C,QAAL,EAAejC,SAAf,CAFH;;AAIA;AACA,KAAMH,OAAOT,UAAU8C,IAAV,IACVC,QAAQ1C,KAAR,EAAeG,SAAf,EAA0BsC,IAA1B,CADU,GAEV,IAFH;;AAIA,QAAOrC,IAAP;AACA;;AAED,SAASsC,OAAT,CAAiB1C,KAAjB,EAAwBG,SAAxB,EAAmCsC,IAAnC,EAAyC;AAAA,KAC1BE,QAD0B,GACwC3C,KADxC,CAChCS,IADgC;AAAA,KAChBY,aADgB,GACwCrB,KADxC,CAChBqB,aADgB;AAAA,KACDD,MADC,GACwCpB,KADxC,CACDoB,MADC;AAAA,KACOU,QADP,GACwC9B,KADxC,CACO8B,QADP;AAAA,KACiBX,MADjB,GACwCnB,KADxC,CACiBmB,MADjB;AAAA,KACyBJ,UADzB,GACwCf,KADxC,CACyBe,UADzB;AAAA,KAGhCR,SAHgC,GAG4DP,KAH5D,CAGhCO,SAHgC;AAAA,KAGrBM,IAHqB,GAG4Db,KAH5D,CAGrBa,IAHqB;AAAA,KAGfG,QAHe,GAG4DhB,KAH5D,CAGfgB,QAHe;AAAA,KAGLM,UAHK,GAG4DtB,KAH5D,CAGLsB,UAHK;AAAA,KAGOE,SAHP,GAG4DxB,KAH5D,CAGOwB,SAHP;AAAA,KAGkBE,YAHlB,GAG4D1B,KAH5D,CAGkB0B,YAHlB;AAAA,KAGgCD,WAHhC,GAG4DzB,KAH5D,CAGgCyB,WAHhC;AAAA,KAG6CE,UAH7C,GAG4D3B,KAH5D,CAG6C2B,UAH7C;AAAA,KAIhCI,UAJgC,GAIP/B,KAJO,CAIhC+B,UAJgC;AAAA,KAIpBC,QAJoB,GAIPhC,KAJO,CAIpBgC,QAJoB;AAAA,KAKhCI,MALgC,GAKrBpC,KALqB,CAKhCoC,MALgC;AAAA,KAOhCQ,MAPgC,GAOsBzC,SAPtB,CAOhCyC,MAPgC;AAAA,KAOTC,MAPS,GAOsB1C,SAPtB,CAOxB2C,WAPwB,CAOTD,MAPS;AAAA,KAOCE,SAPD,GAOsB5C,SAPtB,CAOC4C,SAPD;AAAA,KAOYC,KAPZ,GAOsB7C,SAPtB,CAOY6C,KAPZ;;;AASxC,KAAMC,SAAS1C,UAAUkC,IAAV,CAAf;AAAA,KACCS,SAASH,UAAUN,IAAV,CADV;;AAGA,KAAMU,KAAKC,KAAKC,KAAL,CAAWT,OAAOM,MAAP,CAAX,CAAX;AAAA,KACCI,KAAKF,KAAKC,KAAL,CAAWR,OAAOI,MAAP,CAAX,CADN;;AAZwC,KAejCM,IAfiC,GAejB,CAfiB;AAAA,KAe3BC,KAf2B,GAedR,KAfc;;AAgBxC,KAAMS,QAAQrC,WAAW,MAAX,GACXmC,OAAOzB,QADI,GAEX0B,QAAQ1B,QAFX;;AAIA,QAAO;AACN;AACA4B,cAAYrC,cAAc4B,MAAd,CAFN;AAGNU,QAAM,IAHA;AAINlD,QAAMkC,QAJA;AAKNxB,gBALM;AAMNC,UAAQqC,KANF;AAON5C,QAAMjB,QAAQiB,IAAR,EAAc4B,IAAd,CAPA;AAQN1B,cAAYnB,QAAQmB,UAAR,EAAoB0B,IAApB,CARN;AASNL,UAAQxC,QAAQwC,MAAR,EAAgBK,IAAhB,CATF;AAUNV,wBAVM,EAUMC,kBAVN;AAWNhB,YAAUpB,QAAQoB,QAAR,EAAkByB,IAAlB,CAXJ;AAYNnB,wBAZM,EAYME,oBAZN,EAYiBG,sBAZjB;AAaND,4BAbM,EAaQD,wBAbR;AAcN0B,QAdM;AAeNG,QAfM;AAgBNM,MAAIJ,KAhBE;AAiBNK,MAAIP;AAjBE,EAAP;AAmBA;;AAED,eAAevD,aAAf","file":"EdgeIndicator.js","sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { format } from \"d3-format\";\n\nimport { drawOnCanvas, renderSVG } from \"./EdgeCoordinateV3\";\nimport GenericChartComponent from \"../GenericChartComponent\";\nimport { getAxisCanvas } from \"../GenericComponent\";\n\nimport { first, last, isDefined, functor, noop, strokeDashTypes } from \"../utils\";\n\nclass EdgeIndicator extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.renderSVG = this.renderSVG.bind(this);\n\t\tthis.drawOnCanvas = this.drawOnCanvas.bind(this);\n\t}\n\n\tdrawOnCanvas(ctx, moreProps) {\n\t\tconst edge = helper(this.props, moreProps);\n\t\tconst props = {\n\t\t\t...this.props,\n\t\t\t...edge,\n\t\t};\n\t\tdrawOnCanvas(ctx, props);\n\t}\n\n\trenderSVG(moreProps) {\n\t\tconst edge = helper(this.props, moreProps);\n\t\tconst props = {\n\t\t\t...this.props,\n\t\t\t...edge,\n\t\t};\n\t\treturn renderSVG(props);\n\t}\n\n\trender() {\n\t\treturn <GenericChartComponent\n\t\t\tedgeClip\n\t\t\tclip={false}\n\t\t\tsvgDraw={this.renderSVG}\n\t\t\tcanvasDraw={this.drawOnCanvas}\n\t\t\tcanvasToDraw={getAxisCanvas}\n\t\t\tdrawOn={[\"pan\"]}\n\t\t/>;\n\t}\n}\n\nEdgeIndicator.propTypes = {\n\tyAccessor: PropTypes.func,\n\n\ttype: PropTypes.oneOf([\"horizontal\"]),\n\tclassName: PropTypes.string,\n\tfill: PropTypes.oneOfType([\n\t\tPropTypes.string,\n\t\tPropTypes.func,\n\t]),\n\tlineStroke: PropTypes.oneOfType([\n\t\tPropTypes.string,\n\t\tPropTypes.func,\n\t]),\n\ttextFill: PropTypes.oneOfType([\n\t\tPropTypes.string,\n\t\tPropTypes.func,\n\t]),\n\titemType: PropTypes.oneOf([\"first\", \"last\"]).isRequired,\n\torient: PropTypes.oneOf([\"left\", \"right\"]),\n\tedgeAt: PropTypes.oneOf([\"left\", \"right\"]),\n\tdisplayFormat: PropTypes.func,\n\trectHeight: PropTypes.number,\n\trectWidth: PropTypes.number,\n\ttickerWidth: PropTypes.number,\n\ttickerHeight: PropTypes.number,\n\tarrowWidth: PropTypes.number,\n\tlineStrokeDasharray: PropTypes.oneOf(strokeDashTypes),\n};\n\nEdgeIndicator.defaultProps = {\n\tclassName: \"react-stockcharts-edgeindicator\",\n\n\ttype: \"horizontal\",\n\torient: \"left\",\n\tedgeAt: \"left\",\n\ttextFill: \"#FFFFFF\",\n\tdisplayFormat: format(\".2f\"),\n\tyAxisPad: 0,\n\trectHeight: 20,\n\ttickerHeight: 16,\n\trectWidth: 50,\n\ttickerWidth: 50,\n\tarrowWidth: 10,\n\tfontFamily: \"Helvetica Neue, Helvetica, Arial, sans-serif\",\n\tfontSize: 13,\n\tdx: 0,\n\thideLine: false,\n\tfill: \"#8a8a8a\",\n\topacity: 1,\n\n\tstroke: noop,\n\tstrokeOpacity: 1,\n\tstrokeWidth: 3,\n\tlineStroke: \"#000000\",\n\tlineOpacity: 0.3,\n\tlineStrokeDasharray: \"ShortDash\",\n};\n\nfunction helper(props, moreProps) {\n\tconst { itemType, yAccessor } = props;\n\tconst { plotData } = moreProps;\n\n\tconst item = itemType === \"first\"\n\t\t? first(plotData, yAccessor)\n\t\t: last(plotData, yAccessor);\n\n\t// var currentItem = ChartDataUtil.getCurrentItemForChartNew(currentItems, forChart);\n\tconst edge = isDefined(item)\n\t\t? getEdge(props, moreProps, item)\n\t\t: null;\n\n\treturn edge;\n}\n\nfunction getEdge(props, moreProps, item) {\n\tconst { type: edgeType, displayFormat, edgeAt, yAxisPad, orient, lineStroke } = props;\n\n\tconst { yAccessor, fill, textFill, rectHeight, rectWidth, tickerHeight, tickerWidth, arrowWidth } = props;\n\tconst { fontFamily, fontSize } = props;\n\tconst { stroke } = props;\n\n\tconst { xScale, chartConfig: { yScale }, xAccessor, width } = moreProps;\n\n\tconst yValue = yAccessor(item),\n\t\txValue = xAccessor(item);\n\n\tconst x1 = Math.round(xScale(xValue)),\n\t\ty1 = Math.round(yScale(yValue));\n\n\tconst [left, right] = [0, width];\n\tconst edgeX = edgeAt === \"left\"\n\t\t? left - yAxisPad\n\t\t: right + yAxisPad;\n\n\treturn {\n\t\t// ...props,\n\t\tcoordinate: displayFormat(yValue),\n\t\tshow: true,\n\t\ttype: edgeType,\n\t\torient,\n\t\tedgeAt: edgeX,\n\t\tfill: functor(fill)(item),\n\t\tlineStroke: functor(lineStroke)(item),\n\t\tstroke: functor(stroke)(item),\n\t\tfontFamily, fontSize,\n\t\ttextFill: functor(textFill)(item),\n\t\trectHeight, rectWidth, arrowWidth,\n\t\ttickerHeight, tickerWidth,\n\t\tx1,\n\t\ty1,\n\t\tx2: right,\n\t\ty2: y1,\n\t};\n}\n\nexport default EdgeIndicator;\n"]}