{"version":3,"sources":["../../../src/lib/interactive/InteractivePriceCoordinate.js"],"names":["InteractivePriceCoordinate","props","handleDrag","bind","handleDragComplete","terminate","saveNodeType","getSelectionState","nodes","state","index","yValue","setState","override","moreProps","alertList","newAlertList","map","each","idx","selected","draggedAlert","onDragComplete","xyValue","current","start","end","propTypes","onChoosePosition","func","isRequired","onSelect","defaultPriceCoordinate","shape","bgFill","string","bgOpacity","number","textFill","fontFamily","fontWeight","fontStyle","fontSize","text","hoverText","object","array","enabled","bool","defaultProps","enable","bgHeight","bgWidth","contextTypes","subscribe","unsubscribe","generateSubscriptionId","chartId","oneOfType"],"mappings":";;;;;;;;;;AAEA;;;;AACA;;;;AAEA;;AAEA;;AAMA;;;;AACA;;;;;;;;;;;;IAEMA,0B;;;AACL,qCAAYC,KAAZ,EAAmB;AAAA;;AAAA,sJACZA,KADY;;AAGlB,QAAKC,UAAL,GAAkB,MAAKA,UAAL,CAAgBC,IAAhB,OAAlB;AACA,QAAKC,kBAAL,GAA0B,MAAKA,kBAAL,CAAwBD,IAAxB,OAA1B;AACA,QAAKE,SAAL,GAAiB,kBAAUF,IAAV,OAAjB;;AAEA,QAAKG,YAAL,GAAoB,qBAAaH,IAAb,OAApB;AACA,QAAKI,iBAAL,GAAyB,uCAA0B,WAA1B,EACvBJ,IADuB,OAAzB;;AAGA,QAAKK,KAAL,GAAa,EAAb;AACA,QAAKC,KAAL,GAAa,EAAb;AAZkB;AAalB;;;;6BACUC,K,EAAOC,M,EAAQ;AACzB,QAAKC,QAAL,CAAc;AACbC,cAAU;AACTH,iBADS;AAETC;AAFS;AADG,IAAd;AAMA;;;qCACkBG,S,EAAW;AAAA;;AAAA,OACrBD,QADqB,GACR,KAAKJ,KADG,CACrBI,QADqB;;AAE7B,OAAI,sBAAUA,QAAV,CAAJ,EAAyB;AAAA,QAChBE,SADgB,GACF,KAAKd,KADH,CAChBc,SADgB;;AAExB,QAAMC,eAAeD,UACnBE,GADmB,CACf,UAACC,IAAD,EAAOC,GAAP,EAAe;AACnB,SAAMC,WAAYD,QAAQN,SAASH,KAAnC;AACA,YAAOU,wBAEFF,IAFE;AAGLP,cAAQE,SAASF,MAHZ;AAILS;AAJK,uBAOFF,IAPE;AAQLE;AARK,OAAP;AAUA,KAbmB,CAArB;AAcA,QAAMC,eAAeL,aAAaH,SAASH,KAAtB,CAArB;AACA,SAAKE,QAAL,CAAc;AACbC,eAAU;AADG,KAAd,EAEG,YAAM;AACR,YAAKZ,KAAL,CAAWqB,cAAX,CAA0BN,YAA1B,EAAwCF,SAAxC,EAAmDO,YAAnD;AACA,KAJD;AAKA;AACD;;;iCACcE,O,EAAS;AAAA,OACfC,OADe,GACH,KAAKf,KADF,CACfe,OADe;;;AAGvB,OAAI,sBAAUA,OAAV,KAAsB,sBAAUA,QAAQC,KAAlB,CAA1B,EAAoD;AACnD,SAAKb,QAAL,CAAc;AACbY,cAAS;AACRC,aAAOD,QAAQC,KADP;AAERC,WAAKH;AAFG;AADI,KAAd;AAMA;AACD;;;2BACQ;AAAA;;AAAA,OACAR,SADA,GACc,KAAKd,KADnB,CACAc,SADA;AAAA,OAEAF,QAFA,GAEa,KAAKJ,KAFlB,CAEAI,QAFA;;AAGR,UACC;AAAA;AAAA;AACEE,cAAUE,GAAV,CAAc,UAACC,IAAD,EAAOC,GAAP,EAAe;AAC7B,SAAMlB,QAAQiB,IAAd;AACA,YACC,wEAAqB,KAAKC,GAA1B;AACC,WAAK,OAAKb,YAAL,CAAkBa,GAAlB,CADN;AAEC,aAAOA;AAFR,QAGKlB,KAHL;AAIC,gBAAUiB,KAAKE,QAJhB;AAKC,cAAQ,kCAAqBP,QAArB,EAA+BM,GAA/B,EAAoC,QAApC,EAA8CD,KAAKP,MAAnD,CALT;;AAOC,cAAQ,OAAKT,UAPd;AAQC,sBAAgB,OAAKE,kBARtB;AASC,6BAAsB;AATvB,QADD;AAaA,KAfA;AADF,IADD;AAoBA;;;;;;AAGFJ,2BAA2B2B,SAA3B,GAAuC;AACtCC,mBAAkB,oBAAUC,IAAV,CAAeC,UADK;AAEtCR,iBAAgB,oBAAUO,IAAV,CAAeC,UAFO;AAGtCC,WAAU,oBAAUF,IAHkB;;AAKtCG,yBAAwB,oBAAUC,KAAV,CAAgB;AACvCC,UAAQ,oBAAUC,MAAV,CAAiBL,UADc;AAEvCM,aAAW,oBAAUC,MAAV,CAAiBP,UAFW;AAGvCQ,YAAU,oBAAUH,MAAV,CAAiBL,UAHY;AAIvCS,cAAY,oBAAUJ,MAAV,CAAiBL,UAJU;AAKvCU,cAAY,oBAAUL,MAAV,CAAiBL,UALU;AAMvCW,aAAW,oBAAUN,MAAV,CAAiBL,UANW;AAOvCY,YAAU,oBAAUL,MAAV,CAAiBP,UAPY;AAQvCa,QAAM,oBAAUR,MAAV,CAAiBL;AARgB,EAAhB,EASrBA,UAdmC;;AAgBtCc,YAAW,oBAAUC,MAAV,CAAiBf,UAhBU;AAiBtCf,YAAW,oBAAU+B,KAAV,CAAgBhB,UAjBW;AAkBtCiB,UAAS,oBAAUC,IAAV,CAAelB;AAlBc,CAAvC;;AAqBA9B,2BAA2BiD,YAA3B,GAA0C;AACzCrB,8BADyC;AAEzCN,4BAFyC;AAGzCS,sBAHyC;;AAKzCC,yBAAwB;AACvBE,UAAQ,SADe;AAEvBE,aAAW,CAFY;AAGvBE,YAAU,SAHa;AAIvBC,cAAY,8CAJW;AAKvBG,YAAU,EALa;AAMvBD,aAAW,QANY;AAOvBD,cAAY,QAPW;AAQvBG,QAAM;AARiB,EALiB;AAezCC,yBACI,6BAAmBK,YADvB;AAECC,UAAQ,IAFT;AAGCC,YAAU,EAHX;AAICC,WAAS,GAJV;AAKCT,QAAM;AALP,GAfyC;AAsBzC5B,YAAW;AAtB8B,CAA1C;;AAyBAf,2BAA2BqD,YAA3B,GAA0C;AACzCC,YAAW,oBAAUzB,IAAV,CAAeC,UADe;AAEzCyB,cAAa,oBAAU1B,IAAV,CAAeC,UAFa;AAGzC0B,yBAAwB,oBAAU3B,IAAV,CAAeC,UAHE;AAIzC2B,UAAS,oBAAUC,SAAV,CAAoB,CAAC,oBAAUrB,MAAX,EAAmB,oBAAUF,MAA7B,CAApB,EAA0DL;AAJ1B,CAA1C;;kBAOe9B,0B","file":"InteractivePriceCoordinate.js","sourcesContent":["\n\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { isDefined, noop } from \"../utils\";\n\nimport {\n\tgetValueFromOverride,\n\tterminate,\n\tsaveNodeType,\n\tisHoverForInteractiveType,\n} from \"./utils\";\nimport EachPriceCoordinate from \"./wrapper/EachPriceCoordinate\";\nimport HoverTextNearMouse from \"./components/HoverTextNearMouse\";\n\nclass InteractivePriceCoordinate extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.handleDrag = this.handleDrag.bind(this);\n\t\tthis.handleDragComplete = this.handleDragComplete.bind(this);\n\t\tthis.terminate = terminate.bind(this);\n\n\t\tthis.saveNodeType = saveNodeType.bind(this);\n\t\tthis.getSelectionState = isHoverForInteractiveType(\"alertList\")\n\t\t\t.bind(this);\n\n\t\tthis.nodes = [];\n\t\tthis.state = {};\n\t}\n\thandleDrag(index, yValue) {\n\t\tthis.setState({\n\t\t\toverride: {\n\t\t\t\tindex,\n\t\t\t\tyValue,\n\t\t\t}\n\t\t});\n\t}\n\thandleDragComplete(moreProps) {\n\t\tconst { override } = this.state;\n\t\tif (isDefined(override)) {\n\t\t\tconst { alertList } = this.props;\n\t\t\tconst newAlertList = alertList\n\t\t\t\t.map((each, idx) => {\n\t\t\t\t\tconst selected = (idx === override.index);\n\t\t\t\t\treturn selected\n\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t...each,\n\t\t\t\t\t\t\tyValue: override.yValue,\n\t\t\t\t\t\t\tselected,\n\t\t\t\t\t\t}\n\t\t\t\t\t\t: {\n\t\t\t\t\t\t\t...each,\n\t\t\t\t\t\t\tselected\n\t\t\t\t\t\t};\n\t\t\t\t});\n\t\t\tconst draggedAlert = newAlertList[override.index];\n\t\t\tthis.setState({\n\t\t\t\toverride: null,\n\t\t\t}, () => {\n\t\t\t\tthis.props.onDragComplete(newAlertList, moreProps, draggedAlert);\n\t\t\t});\n\t\t}\n\t}\n\thandleDrawLine(xyValue) {\n\t\tconst { current } = this.state;\n\n\t\tif (isDefined(current) && isDefined(current.start)) {\n\t\t\tthis.setState({\n\t\t\t\tcurrent: {\n\t\t\t\t\tstart: current.start,\n\t\t\t\t\tend: xyValue,\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\trender() {\n\t\tconst { alertList } = this.props;\n\t\tconst { override } = this.state;\n\t\treturn (\n\t\t\t<g>\n\t\t\t\t{alertList.map((each, idx) => {\n\t\t\t\t\tconst props = each;\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<EachPriceCoordinate key={idx}\n\t\t\t\t\t\t\tref={this.saveNodeType(idx)}\n\t\t\t\t\t\t\tindex={idx}\n\t\t\t\t\t\t\t{...props}\n\t\t\t\t\t\t\tselected={each.selected}\n\t\t\t\t\t\t\tyValue={getValueFromOverride(override, idx, \"yValue\", each.yValue)}\n\n\t\t\t\t\t\t\tonDrag={this.handleDrag}\n\t\t\t\t\t\t\tonDragComplete={this.handleDragComplete}\n\t\t\t\t\t\t\tedgeInteractiveCursor=\"react-stockcharts-move-cursor\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</g>\n\t\t);\n\t}\n}\n\nInteractivePriceCoordinate.propTypes = {\n\tonChoosePosition: PropTypes.func.isRequired,\n\tonDragComplete: PropTypes.func.isRequired,\n\tonSelect: PropTypes.func,\n\n\tdefaultPriceCoordinate: PropTypes.shape({\n\t\tbgFill: PropTypes.string.isRequired,\n\t\tbgOpacity: PropTypes.number.isRequired,\n\t\ttextFill: PropTypes.string.isRequired,\n\t\tfontFamily: PropTypes.string.isRequired,\n\t\tfontWeight: PropTypes.string.isRequired,\n\t\tfontStyle: PropTypes.string.isRequired,\n\t\tfontSize: PropTypes.number.isRequired,\n\t\ttext: PropTypes.string.isRequired,\n\t}).isRequired,\n\n\thoverText: PropTypes.object.isRequired,\n\talertList: PropTypes.array.isRequired,\n\tenabled: PropTypes.bool.isRequired,\n};\n\nInteractivePriceCoordinate.defaultProps = {\n\tonChoosePosition: noop,\n\tonDragComplete: noop,\n\tonSelect: noop,\n\n\tdefaultPriceCoordinate: {\n\t\tbgFill: \"#FFFFFF\",\n\t\tbgOpacity: 1,\n\t\ttextFill: \"#F10040\",\n\t\tfontFamily: \"Helvetica Neue, Helvetica, Arial, sans-serif\",\n\t\tfontSize: 12,\n\t\tfontStyle: \"normal\",\n\t\tfontWeight: \"normal\",\n\t\ttext: \"Lorem ipsum...\"\n\t},\n\thoverText: {\n\t\t...HoverTextNearMouse.defaultProps,\n\t\tenable: true,\n\t\tbgHeight: 18,\n\t\tbgWidth: 175,\n\t\ttext: \"Click and drag the edge circles\",\n\t},\n\talertList: [],\n};\n\nInteractivePriceCoordinate.contextTypes = {\n\tsubscribe: PropTypes.func.isRequired,\n\tunsubscribe: PropTypes.func.isRequired,\n\tgenerateSubscriptionId: PropTypes.func.isRequired,\n\tchartId: PropTypes.oneOfType([PropTypes.number, PropTypes.string]).isRequired,\n};\n\nexport default InteractivePriceCoordinate;\n"]}